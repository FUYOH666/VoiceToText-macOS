---
alwaysApply: false
description: Troubleshooting guide for SuperWhisper issues
---

# Troubleshooting Guide для SuperWhisper

## 🔍 Общие принципы отладки

### 1. Логи - ваш лучший друг
Все компоненты пишут подробные логи. При проблемах:

```bash
# Запуск с просмотром логов
./venv/bin/python superwhisper.py

# Или с перенаправлением в файл
./venv/bin/python superwhisper.py > logs.txt 2>&1
```

### 2. Тестирование компонентов
```bash
# Базовые компоненты
./venv/bin/python test_basic.py

# Автовставка с подробными логами
./venv/bin/python test_auto_paste_debug.py
```

## 🚨 Распространенные проблемы

### Автовставка не работает

**Симптомы:**
```
✅ Запись работает
✅ Распознавание работает
❌ Текст не вставляется
```

**Решения:**

1. **Проверить метод вставки:**
   - Клик на 🎤 в меню-баре
   - Выбрать "📋 Метод вставки"
   - Попробовать оба варианта

2. **Проверить курсор:**
   - Убедитесь что курсор в текстовом поле
   - Проверьте что приложение активно

3. **Проверить настройки:**
   ```yaml
   ui:
     auto_paste_enabled: true
     auto_paste_force_mode: true
   ```

4. **Посмотреть логи:**
   ```
   🎯 Активное приложение: 'TextEdit'
   📋 Начинаем вставку через буфер обмена
   ✅ Автовставка завершена успешно
   ```

### Приложение не запускается

**Симптомы:**
```
python: command not found
или
ImportError: No module named 'mlx_whisper'
```

**Решения:**

1. **Первый запуск:**
   ```bash
   ./install_and_run.sh
   ```

2. **Повторные запуски:**
   ```bash
   superwhisper
   # или
   ./venv/bin/python superwhisper.py
   ```

3. **Переустановка окружения:**
   ```bash
   rm -rf venv
   ./install_and_run.sh
   ```

### Странные знаки препинания

**Симптомы:**
```
"как дела?" → "как дела."
"В. принципе" вместо "В принципе"
лишние запятые
```

**Решение:**
В текущей версии (v1.0.0) пунктуация исправлена:
- Точность 71.4%
- Автоматическая очистка артефактов
- Правильная сегментация предложений

### Нет доступа к микрофону

**Симптомы:**
```
PyAudio error
или
Нет звука при записи
```

**Решение:**
1. System Settings → Privacy & Security → Microphone
2. Разрешить доступ для Python/Terminal
3. Перезапустить SuperWhisper

## 🔧 Диагностика

### Проверка виртуального окружения
```bash
# Проверить активацию
source venv/bin/activate
which python
python --version

# Проверить зависимости
pip list | grep -E "(mlx|torch|pyaudio)"
```

### Проверка системных разрешений
```bash
# Микрофон
osascript -e "get volume settings"

# Accessibility (может потребовать sudo)
# System Settings → Privacy & Security → Accessibility
```

### Тестирование компонентов по отдельности
```python
# В Python REPL
from src.config import Config
from src.whisper_service import WhisperService

config = Config("config.yaml")
whisper = WhisperService(config)
print("Whisper инициализирован успешно")
```

## 📊 Логи для анализа

### Успешная автовставка
```
🔄 Автовставка вызвана с текстом: 'Привет мир!'
📊 Длина текста: 11 символов
🎯 Активное приложение: 'TextEdit'
📋 Начинаем вставку через буфер обмена
💾 Оригинальный буфер: '...'
📝 Скопированный текст: 'Привет мир!'
⌨️ Отправляем Cmd+V
✅ Автовставка завершена успешно
```

### Проблемная автовставка
```
🔄 Автовставка вызвана с текстом: 'Привет мир!'
❌ Ошибка автовставки: [конкретная ошибка]
```

## 🚀 Профилактика

### Регулярное обслуживание
```bash
# Очистка кэша
rm -rf cache/
./install_and_run.sh

# Проверка дискового пространства
df -h
```

### Мониторинг производительности
```bash
# Память
ps aux | grep python
top -pid $(pgrep python)

# Диск
du -sh cache/ models/
```

## 📞 Когда нужна помощь

Если стандартные решения не помогают:

1. **Собрать информацию:**
   ```bash
   # Версия macOS
   sw_vers

   # Версия Python
   python --version

   # Установленные пакеты
   pip list

   # Логи запуска
   ./venv/bin/python superwhisper.py > debug.log 2>&1
   ```

2. **Создать issue на GitHub** с:
   - Версией macOS и Python
   - Полными логами ошибки
   - Шагами воспроизведения

3. **Проверить известные проблемы:**
   - Apple Silicon vs Intel
   - macOS версии
   - Конфликты с другими приложениями

## 🎯 Быстрые команды

```bash
# Полная диагностика
./install_and_run.sh

# Только тестирование
./venv/bin/python test_auto_paste_debug.py

# Очистка и перезапуск
rm -rf venv cache/ && ./install_and_run.sh

# Логи в файл
./venv/bin/python superwhisper.py > logs.txt 2>&1
```