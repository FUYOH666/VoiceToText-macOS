---
alwaysApply: true
---

# SuperWhisper Project Structure Guide

SuperWhisper - это macOS приложение для локального распознавания речи с автоматической вставкой текста.

## GitHub Repository

**Репозиторий**: https://github.com/FUYOH666/VoiceToText-macOS  
**Статус**: Публичный, готов к использованию  
**Цель**: Поделиться с сообществом локальным решением для диктовки

## Основная архитектура

Главный файл: [superwhisper.py](mdc:superwhisper.py) - содержит GUI приложение на rumps с меню-баром.

Конфигурация: [config.yaml](mdc:config.yaml) - все настройки приложения.

## Структура src/

- [src/config.py](mdc:src/config.py) - загрузка конфигурации
- [src/audio_recorder.py](mdc:src/audio_recorder.py) - запись с микрофона через PyAudio
- [src/whisper_service.py](mdc:src/whisper_service.py) - распознавание речи через MLX Whisper
- [src/punctuation_service.py](mdc:src/punctuation_service.py) - восстановление пунктуации 
- [src/auto_paste.py](mdc:src/auto_paste.py) - автоматическая вставка текста
- [src/hotkey_manager.py](mdc:src/hotkey_manager.py) - горячие клавиши (Option+Space)
- [src/vad_service.py](mdc:src/vad_service.py) - обнаружение речи (Silero VAD)
- [src/async_processor.py](mdc:src/async_processor.py) - асинхронная обработка
- [src/notification_service.py](mdc:src/notification_service.py) - уведомления macOS
- [src/memory_manager.py](mdc:src/memory_manager.py) - управление памятью

## Принципы разработки

1. **Ленивая загрузка**: Модели загружаются только при необходимости
2. **Управление памятью**: Принудительная очистка после каждой обработки
3. **Потокобезопасность**: UI операции только в главном потоке
4. **Офлайн работа**: Все модели локальные, без интернета
5. **Логирование**: Подробные логи для отладки

## Модели

- **Whisper**: MLX-оптимизированная модель в `./models/`
- **VAD**: Silero VAD в `./cache/vad/`
- **Пунктуация**: DeepPavlov модель в `./cache/punctuation/`