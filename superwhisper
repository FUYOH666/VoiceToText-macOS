#!/bin/bash

# SuperWhisper - –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: superwhisper (–∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)

# –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–∑–º–µ–Ω–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
PROJECT_DIR="/Users/aleksandrmordvinov/development/RAM anthropic"

echo "üé§ –ó–∞–ø—É—Å–∫ SuperWhisper –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"
echo "==========================================="

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
if [ -d "$PROJECT_DIR" ]; then
    cd "$PROJECT_DIR"
    echo "üìÅ –ü–µ—Ä–µ—Ö–æ–¥ –≤: $(pwd)"
else
    echo "‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: $PROJECT_DIR"
    echo "–ò–∑–º–µ–Ω–∏—Ç–µ PROJECT_DIR –≤ —ç—Ç–æ–º —Å–∫—Ä–∏–ø—Ç–µ"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
if [ ! -d "venv" ]; then
    echo "‚ùå –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞: ./install_and_run.sh"
    exit 1
fi

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo "üîß –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Python
if ! ./venv/bin/python --version >/dev/null 2>&1; then
    echo "‚ùå Python –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"
    echo "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å venv: rm -rf venv && ./install_and_run.sh"
    exit 1
fi

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
echo "üöÄ –ó–∞–ø—É—Å–∫ SuperWhisper..."
echo ""
echo "‚å®Ô∏è  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:"
echo "   ‚Ä¢ Option + Space - –∑–∞–ø–∏—Å—å/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞"
echo "   ‚Ä¢ –ò–∫–æ–Ω–∫–∞ üé§/üî¥ –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é"
echo "   ‚Ä¢ –¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫—É—Ä—Å–æ—Ä"
echo ""
echo "üõë –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: Ctrl+C"
echo ""

# –ó–∞–ø—É—Å–∫ —Å trap –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
trap 'echo ""; echo "üëã SuperWhisper –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"; exit 0' INT TERM

./venv/bin/python superwhisper.py

echo "üëã SuperWhisper –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É"
